try{clouda.lightInit({module:["account"]})}catch(e){}!function(e){function t(){for(var e=location.search.substr(1),t=e.split("&"),o={},i=0;i<t.length;i++){var n=t[i].split("=");o[n[0]]=n[1]}return o}function o(t){if(!t.dataset.inited){var o=t.dataset.bd_vote,i=t.dataset.url||location.href;o||(o=e.bd_vote_config.default_id,e.bd_vote_config.url&&(i=e.bd_vote_config.url));var n=c+"widget/social/like";if(n+="?app_id="+e.bd_vote_config.appid+"&third_source_id="+o+"&url="+encodeURIComponent(i),a.bd_vote){var d=a.bd_vote,s=t.dataset.bd_vote||e.bd_vote_config.default_id;s==d&&(n+="&vote=1");try{if(-1!=l.search(/bd_vote=[^&]+/)){var r=l.replace(/bd_vote=[^&]+/,"");history.replaceState({},"",r)}}catch(_){}}"black"==e.bd_vote_config.style&&(n+="&style=black"),e.bd_vote_config.cssLink&&(n+="&cssLink=1");var b="vote"+(new Date).valueOf()+parseInt(100*Math.random()),v='<iframe id="'+b+'" style="border: none;width: 100%;height: 100%;display:none;" src="';v+=n+"&id="+b,v+='"></iframe>',t.innerHTML=v,t.dataset.inited=1}}function i(t){var o=t.data;if("vote"==o.type)switch(t.stopPropagation(),o.method){case"login":var i=0;e.bd_vote_config.confirm&&(i=1);var n=location.href;n+=-1==n.search(/\?/)?"?bd_vote="+o.sign:"&bd_vote="+o.sign;var a=c+"widget/social/login/callback?u="+encodeURIComponent(n)+"&app_id="+e.bd_vote_config.appid;a=c+"/developer/static/1417097038916/social-widget/redirect.html?url="+encodeURIComponent(a),"undefined"!=typeof BLightApp?(clouda&&clouda.mbaas&&clouda.mbaas.account||clouda.lightInit({module:["account"]}),clouda.mbaas.account.bdLogin({scope:"",login_mode:0,login_type:"mobile",tpl:"lightwebapp",onsuccess:function(e){location.replace(n),console.log(e)},onfail:function(e){location.replace(n),console.log(e)}})):location.href=a;break;case"tips":d(o.msg);break;case"show":document.getElementById(o.id).style.display="block",e.bd_vote_config.stack&&e.bd_vote_config.stack();break;case"topic_id":try{e.bd_vote_config.callback(o.topic_id)}catch(t){}}}function n(){for(var t=document.querySelectorAll(".bd_vote"),n=0;n<t.length;n++)o(t[n]);e.bd_vote_config.inited||(e.addEventListener("message",i,!1),e.bd_vote_config.inited=1)}function d(e){if(document.getElementById("bd_v_tips"))document.getElementById("bd_v_tips_msg").innerHTML=e;else{var t=document.createElement("div");t.style.position="fixed",t.style.width="100%",t.style.height="100%",t.style.textAlign="center",t.style.display="none",t.id="bd_v_tips",t.innerHTML='<div id="bd_v_tips_msg" style="color: #ffffff;font-size: 16px;line-height: 40px;padding: 0 10px;text-align: center;border-radius: 5px;display: inline-block;background-color: #666666;max-width: 300px;">'+e+"</div>",document.getElementsByTagName("body")[0].appendChild(t)}document.getElementById("bd_v_tips").style.display="block",setTimeout(function(){document.getElementById("bd_v_tips")&&document.getElementsByTagName("body")[0].removeChild(document.getElementById("bd_v_tips"))},2e3)}var c="http://openapi.baidu.com/",a=t(),l=location.href;n();try{var s=document.querySelectorAll(".bd_vote>iframe")[0];s.contentWindow.location.href=s.src}catch(r){}e.bd_vote_config.getId=function(t){e.bd_vote_config.callback=t,"block"!=document.querySelectorAll(".bd_vote>iframe")[0].style.display?e.bd_vote_config.stack=function(){document.querySelectorAll(".bd_vote>iframe")[0].contentWindow.postMessage({method:"topic_id"},"*")}:document.querySelectorAll(".bd_vote>iframe")[0].contentWindow.postMessage({method:"topic_id"},"*")}}(window);