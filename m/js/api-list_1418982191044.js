(function(window){"use strict";if(typeof window!=='object')return;if(typeof window.clouda==='undefined'){window.Blend=window.clouda={}};var b=window.clouda;
"function"!=typeof clouda.lightapp&&(clouda.lightapp=function(a,b){clouda.lightapp.ak=a,"function"==typeof b&&b()}),"function"!=typeof clouda.lightInit&&(clouda.lightInit=function(a,b){clouda.lightapp.ak=a.ak,"function"==typeof b&&b()}),clouda.STATUS={SUCCESS:0,SYSTEM_FAILURE:-3,USER_CANCELED:-2},clouda.RUNTIMES={WEB:0,KUANG:1,NUWA:2},clouda.PLATFORMS={ANDROID:1,IOS:2,OTHER:0},function(){if(clouda.RUNTIME="undefined"!=typeof BLightApp?clouda.RUNTIMES.KUANG:navigator.userAgent.match(/BaiduLightAppRuntime/i)?clouda.RUNTIMES.NUWA:clouda.RUNTIMES.WEB,clouda.PLATFORM=navigator.userAgent.match(/android/i)?clouda.PLATFORMS.ANDROID:navigator.userAgent.match(/(iphone)|(ipad)/i)?clouda.PLATFORMS.IOS:clouda.PLATFORMS.OTHER,navigator.userAgent.match(/baiduboxapp\/([\d.-_]*)/i)){var a=navigator.userAgent.match(/baiduboxapp\/([\d.-_]*)/i)[1];a.match(/[1-9]\.[^_]*/)&&(a=a.match(/[1-9]\.[^_]*/)[0]),clouda.PLATFORM===clouda.PLATFORMS.IOS&&(a=a.split(".").reverse().join(".")),clouda.RUNTIME_VERSION=a}else clouda.RUNTIME_VERSION="0"}();var ErrCode={UNKNOW_CALLBACK:-10,UNKNOW_INPUT:-99,SYSTEM_FAILURE:-3,USER_CANCELED:-2,AK_UNDEFINED:-4,RT_GETERROR:5,EXEC_ERROR:-5,NOT_FINISH:-98,BROWSER_NOT_SUPPORT:-97,ACC_GET_ERR:6,LOC_GET_ERR:7,CAP_GET_ERR:8,CONTACT_FIND_ERR:9,GLO_ERR:10,REACH_ERR:11,MEDIA_ERR:12,CPS_ERROR:13,BTY_ERROR:14,QR_ERR:15,FS_ERR:16,BTY_ERR:17,CONNECT_ERROR:18,SCREEN_ERROR:19,FR_ERROR:20,PUSH_ERR:21,GYRO_ERR:22,MAP_ERROR:23,LOGIN_ERROR:24,PCS_ERROR:25,DEVICE_ERR:26,PAY_ERROR:27,APP_ERROR:28},errorMessage={0:"成功","-10":"接口返回不符合预期","-2":"用户取消","-3":"接口的运行错误。","-4":"错误，您需要在调用api前设置ak。 clouda.lightapp(your_ak_here);","-5":"执行接口出错。","-98":"接口未提供。","-99":"接口输入不符合预期。",5:"接口的运行环境准备中出错。"},runtimeError=function(a,b,c){if(clouda.RUNTIME===clouda.RUNTIMES.WEB&&clouda.PLATFORM===clouda.PLATFORMS.ANDROID)return void clouda.lib.moplus.openApp();0>a&&(b=a),"object"==typeof c&&"function"==typeof c.onfail&&c.onfail(b);try{throw new Error}catch(d){var e=d.stack.split("\n"),f=errorMessage[a];if(!f)for(var g in ErrCode)if(ErrCode[g]===a){f=a+":"+g;break}console.error(f+"! "+(b?"app错误信息"+JSON.stringify(b):"")+e[2].replace(/\s*/,""))}},kuangstack=[],stackn=0,kuangForReady=function(functionname,argus){1!=clouda.STATUS.SUCCESS&&0===stackn?kuangstack.push({func:functionname,arg:argus}):eval(functionname).apply(null,argus)},BLightClass=function(){return function(a){return function(){a.exec.apply(a,arguments)}}(this)},emptyfunc=function(){};BLightClass.prototype.exec=function(){for(var a,b=arguments,c=Array.prototype.shift.apply(b),d=0,e=b.length;e>d;d++)"function"==typeof b[d]&&("function"==typeof b[d+1]?(a=clouda.lib.utils.regcallback(b[d],b[d+1]),b[d+1]=a.f):a=clouda.lib.utils.regcallback(b[d],emptyfunc),b[d]=a.s);1!=clouda.STATUS.SUCCESS&&0===stackn?kuangstack.push({func:"BLightApp."+c,arg:b}):BLightApp[c].apply(BLightApp,b)};var cloudaBLight=new BLightClass,DelegateClass=function(a,b,c){return this.module=a,this.submodule=b,this.func=c,function(a){return function(){a.exec.apply(a,arguments)}}(this)};DelegateClass.prototype.exec=function(){var a=arguments,b=this;installPlugin(this.module,function(c){try{b.func?c[b.submodule][b.func].apply(b,a):c[b.submodule].apply(b,a)}catch(d){var e;e=c?ErrCode.EXEC_ERROR:clouda.STATUS.SYSTEM_FAILURE,a.length&&"object"==typeof a[a.length-1]&&"function"==typeof a[a.length-1].onfail&&a[a.length-1].onfail(e),console.error(d.stack),b.error(e)}})},clouda.lightapp.error=DelegateClass.prototype.error=runtimeError;var beforeRuntimeReadyStack=[],timeoutid,triggerStack=function(){if(beforeRuntimeReadyStack.length){for(var i=0,len=beforeRuntimeReadyStack.length;len>i;i++)installPlugin.apply(void 0,beforeRuntimeReadyStack[i]);beforeRuntimeReadyStack.length=0}if(kuangstack.length){for(var j=0,jlen=kuangstack.length;jlen>j;j++)"undefined"!=typeof BLightApp?eval(kuangstack[j].func).apply(BLightApp,kuangstack[j].arg):eval(kuangstack[j].func).apply(void 0,kuangstack[j].arg);kuangstack.length=0}};timeoutid=setTimeout(function(){stackn=100,clouda.STATUS.SUCCESS||(clouda.STATUS.SUCCESS=1),triggerStack()},3e3),document.addEventListener("runtimeready",function(){clouda.STATUS.SUCCESS=1,"undefined"!=typeof BLightApp?clouda.RUNTIME=clouda.RUNTIMES.KUANG:clouda.RUNTIME!=clouda.RUNTIMES.KUANG&&(clouda.RUNTIME=clouda.RUNTIMES.NUWA),clearTimeout(timeoutid),triggerStack()});var regPlugins={},regCallbacks={},installPlugin=function(a,b,c){if(!clouda.lightapp.ak)return runtimeError(ErrCode.AK_UNDEFINED),console.error("错误，'"+a+"' clouda.lightapp(your_ak_here);"),!1;if(!clouda.STATUS.SUCCESS&&100>stackn)return void beforeRuntimeReadyStack.push([a,b]);if(!a)return!1;if("undefined"!=typeof regPlugins[a]&&regPlugins[a])return b(regPlugins[a]);if(Array.isArray(regCallbacks[a]))return regCallbacks[a].push(b);try{nuwa.pm.bindAk(clouda.lightapp.ak),regCallbacks[a]=[],regCallbacks[a].push(b),nuwa.pm.absorb(a,function(b){b.on("error",function(){throw new Error("RT_GETERROR")}),b.on("progress",function(b){console.log(a+" percentage = "+b)}),b.on("complete",function(){var b=nuwa.require(a);regPlugins[a]=b;for(var c=0,d=regCallbacks[a].length;d>c;c++)regCallbacks[a][c](b);delete regCallbacks[a]})})}catch(d){try{b(null)}catch(e){runtimeError(clouda.STATUS.SYSTEM_FAILURE,null,c),console.error(e.stack)}}return!1},count=0,uniqid=function(a){return a=a||"BlendUI",a+count++},define=function(a,b){var c,d;a.indexOf("/")>0?(c=clouda[a.split("/")[0]],d=a.split("/")[1],c[d]&&c[d].loadFlag?console.log('"'+d+'" has been already defined '):b.call(clouda.lightapp,c,clouda)):(c=clouda[a],b.call(clouda.lightapp,c,clouda))};clouda.device||(clouda.device={}),clouda.mbaas||(clouda.mbaas={}),clouda.lib||(clouda.lib={});define("lib",function(a){var b={},c="2264015";b.openApp=function(a,b,d){var e,f,g,h=0,i=location.href;if(d&&"object"==typeof d&&(f=d.tip||"",g=d.platform||"",h=d.startDownload),"string"==typeof d&&(f=d),a||confirm(f||"运行错误\n当前浏览器无法正常运行此页面，请使用手机百度\n点击确定立即启用")){if(1==h)return"ios"==g?void(location.href="itms-apps://itunes.apple.com/app/id382201985"):void(location.href="http://dl.ops.baidu.com/baidusearch_AndroidPhone_1006041p.apk");e="http://zhida.baidu.com/s?app_id="+(b||c)+"&target_url="+encodeURIComponent(i)+"&ref_id=invoker",location.href=e}},a.moplus=b});define("lib",function(a){function b(a){a.debug||(a.debug=a.info),l.log=a}var c,d=console,e=function(){};c=a.callbackProxy?a.callbackProxy:{successProxy:{},failProxy:{}};var f=100,g='function (randomId,result) {var sproxy = clouda.lib.callbackProxy.successProxy[randomId];if(typeof result === "string"){try{result = JSON.parse(result);}catch(e){console.error(e);}}if(sproxy){sproxy(result);}else{console.warn(randomId+" lost!");}}',h='function (randomId,result) {var fproxy = clouda.lib.callbackProxy.failProxy[randomId];if(typeof result === "string"){result = JSON.parse(result);}if(fproxy){fproxy(result);}else{console.warn(randomId+" lost!");}}',i={log:e,error:e,warn:e,info:e,debug:e,trace:e};Function.prototype.bind&&["error","warn"].forEach(function(a){i[a]=d[a].bind(d)});var j=!("undefined"==typeof a||!a.exports),k=!("undefined"==typeof document||!document.getElementById),l={slientLogger:i,setLogger:b,setDebugMode:function(a){b(a?d:i)},domReady:function(a){return/complete|loaded|interactive/.test(document.readyState)?void a():void document.addEventListener("DOMContentLoaded",function(){a()},!1)},extend:function(a){return a||(a={}),Array.prototype.slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},isArray:function(a){return Array.isArray?Array.isArray(a):"[object Array]"==Object.prototype.call(a)},isObject:function(a){return"[object Object]"==Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"==Object.prototype.toString.call(a)},isNumber:function(a){return"[object Number]"==Object.prototype.toString.call(a)},isString:function(a){return"[object String]"==Object.prototype.toString.call(a)},isDefined:function(a){return"undefined"!=typeof a},isSimpleValue:function(a){return!(this.isObject(a)||this.isArray(a)||this.isFunction(a))},getUniqId:function(){return++f},randomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},inherit:function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},ajaxGet:function(a){var b=new window.XMLHttpRequest;return a.async!==!1&&(a.async=!0),a.async&&(b.onreadystatechange=function(){if(4==b.readyState){var c;b.status>=200&&b.status<300||0===b.status&&"file:"==location.protocol?(c=b.responseText,a.callback(c)):a.callback(b.responseText)}}),b.open("GET",a.url,a.async),b.send(a.query||""),a.async?void 0:200===b.status?b.responseText:!1},trim:function(a){return a?a.trim?a.trim():a.replace(/^\s+|\s+$/gm,""):""},trigger:function(a,b,c){if(!a)return void this.log.error("emply element passed in");c=c||{};var d,e={bubbles:!0,cancelable:!0,detail:c};if("undefined"!=typeof CustomEvent)d=new CustomEvent(b,e),a.dispatchEvent(d);else try{d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c),a.dispatchEvent(d)}catch(f){this.log.error(f)}return!0},copy:function(a){var b;if(this.isArray(a)){b=[];for(var c=0,d=a.length;d>c;c++)b.push(this.copy(a[c],1));return b}if(this.isObject(a)){b={};for(var e in a)a.hasOwnProperty(e)&&!this.isSysOwnedFld(e)&&(b[e]=this.copy(a[e],1));return b}return a},isNodeEnv:function(){return j},isBrowserEnv:function(){return k},isPlainObject:function(a){if(!a||!this.isObject(a)||a.nodeType)return!1;if(a.constructor&&!a.hasOwnProperty("constructor")&&!a.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1;var b=void 0;for(b in a);return void 0===b||a.hasOwnProperty(b)},removeFromArray:function(a,b){var c=a.indexOf(b);return c>-1&&a.splice(c,1),c},size:function(a){if(null===a)return 0;if(a.length===+a.length)return a.length;var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},regcallback:function(a,b){if(!a||!b||"function"!=typeof a||"function"!=typeof b)return lightapp.error(ErrCode.UNKNOW_INPUT,a,b),!1;var d=this.randomInt(100,200)+Date.now();c.successProxy[d]=a,c.failProxy[d]=b;var e="(function(result){ var randomId = '"+d+"';(",f=")(randomId,result)})";return{s:e+g+f,f:e+h+f}},getWebKitPluginInfo:function(a){return clouda.RUNTIME===clouda.RUNTIMES.KUANG&&clouda.PLATFORM===clouda.PLATFORMS.ANDROID&&clouda.RUNTIME_VERSION>="5.5"?void cloudaBLight("getWebKitPluginInfo",a,a):void("function"==typeof a&&a({result:1}))},setLogStorage:function(a,b){try{var c=localStorage.getItem("cloudaFuncs");if(c)try{c=JSON.parse(c),c[a]||(c[a]={}),c[a][b]||(c[a][b]=0),c[a][b]=c[a][b]+1}catch(d){console.error(d.stack)}else c={},c[a]={},c[a][b]=1;localStorage.setItem("cloudaFuncs",JSON.stringify(c))}catch(d){console.error(d.stack)}},closeWindow:function(){clouda.PLATFORM===clouda.PLATFORMS.IOS?cloudaBLight("closeWindow",function(){},function(){}):cloudaBLight("closeWindow")}};l.setDebugMode(!1),a.utils=l,a.callbackProxy=c});define("mbaas",function(a){function b(){return clouda.RUNTIME===clouda.RUNTIMES.KUANG&&clouda.PLATFORM===clouda.PLATFORMS.IOS&&"function"==typeof BLightApp.addLAPush?!0:!1}function c(a,b,c){var d={appid:c.appid,statis_ext:{src:"clouda"},push_action:b};c.nonce&&(d.nonce=c.nonce),c.csrftoken&&(d.csrftoken=c.csrftoken),c.tag&&(d.tags=[c.tag]);var e={push_params:d},f=function(){c.onsuccess(1)},g=function(a){c.onfail(a)};return cloudaBLight(a,JSON.stringify(e),f,g),!1}var d=this,e=a.app={};e.followSite=function(a,e){return a?(clouda.lib.utils.setLogStorage("app","followSite"),b()?(e.appid=a,void c("addLAPush","subscribe",e)):clouda.RUNTIME===clouda.RUNTIMES.KUANG?clouda.RUNTIME_VERSION<5.3?(e.onsuccess&&"function"==typeof e.onsuccess&&e.onsuccess(0),void clouda.lib.moplus.openApp(!1,a,{tip:"请使用最新版【手机百度】\n订阅",startDownload:1})):(cloudaBLight("followSite",function(){e.onsuccess(clouda.STATUS.SUCCESS)},e.onfail),!1):"undefined"!=typeof BLightApp||navigator.userAgent.match(/baiduboxapp\/([\d.-_]*)/i)?clouda.RUNTIME_VERSION>=5.3?void clouda.lib.moplus.openApp(!0,a):(e.onsuccess&&"function"==typeof e.onsuccess&&e.onsuccess(0),void clouda.lib.moplus.openApp(!1,a,{tip:"请使用最新版【手机百度】\n订阅",startDownload:1})):void(clouda.RUNTIME===clouda.RUNTIMES.NUWA&&installPlugin("device",function(){nuwa.am.subscribe(a,function(){e.onsuccess(clouda.STATUS.SUCCESS)},function(a){d.error(ErrCode.APP_ERROR,a,e)})}))):void 0},e.checkFollow=function(a,b){return a?(clouda.lib.utils.setLogStorage("app","checkFollow"),clouda.RUNTIME===clouda.RUNTIMES.KUANG?(cloudaBLight("queryWzStatus",function(a){b.onsuccess(parseInt(a.status,10))},b.onfail),!1):void installPlugin("device",function(){nuwa.am.hasSubscribed(a,function(a){b.onsuccess(a?1:0)},function(a){d.error(ErrCode.APP_ERROR,a,b)})})):void d.error(ErrCode.UNKNOW_INPUT,ErrCode.UNKNOW_INPUT,b)},e.checkSupport=function(a){var b={};clouda.RUNTIME===clouda.RUNTIMES.NUWA?b["native"]=1:clouda.RUNTIME===clouda.RUNTIMES.KUANG?b["native"]=BLightApp&&"function"==typeof BLightApp.followSite?1:0:clouda.RUNTIME===clouda.RUNTIMES.WEB&&(b["native"]=0),b.web=0,a(b)}});define("mbaas",function(a){function b(){return clouda.RUNTIME===clouda.RUNTIMES.KUANG&&clouda.PLATFORM===clouda.PLATFORMS.IOS&&"function"==typeof BLightApp.addLAPush?!0:!1}function c(a,b,c){var d={api_key:clouda.lightapp.ak,statis_ext:{src:"clouda"},push_action:b};c.nonce&&(d.nonce=c.nonce),c.csrftoken&&(d.csrftoken=c.csrftoken),c.tag&&(d.tags=[c.tag]);var e={push_params:d},f=function(a){var b=a.other_param?a.other_param:a;c.onsuccess(b)},g=function(a){c.onfail(a)};return cloudaBLight(a,JSON.stringify(e),f,g),!1}var d=a.push={},e=function(a,b){var c=document.createElement("script");c.setAttribute("src",a),document.head.appendChild(c),c.onload=function(){b&&b(c)}},f="";d.registerUnicast=function(a){if(clouda.lib.utils.setLogStorage("push","registerUnicast"),clouda.RUNTIME===clouda.RUNTIMES.KUANG&&clouda.RUNTIME_VERSION<"5.4"&&clouda.PLATFORM===clouda.PLATFORMS.ANDROID)return cloudaBLight("getPushToken",a.onsuccess,a.onfail),!1;if(b())return void c("addLAPush","bind",a);window.cloudaPushServiceRegisterUnicast=function(b){b.error?a.onfail(b):a.onsuccess(b)};var d="";a.nonce&&a.csrftoken&&(d="&nonce="+a.nonce+"&csrftoken="+a.csrftoken),a.addShortcut&&(d=d+"&addShortcut="+a.addShortcut);var g=""===f?"7777":f;e("http://127.0.0.1:"+g+"/bindLight?apikey="+clouda.lightapp.ak+d+"&callback=cloudaPushServiceRegisterUnicast",function(a){document.head.removeChild(a)})},d.unregisterUnicast=function(a){if(clouda.lib.utils.setLogStorage("push","unregisterUnicast"),b())return void c("deleteLAPush","bind",a);window.cloudaPushServiceUnregisterUnicast=function(b){b.error?a.onfail(b):a.onsuccess(b)};var d="";a.nonce&&a.csrftoken&&(d="&nonce="+a.nonce+"&csrftoken="+a.csrftoken);var g=""===f?"7777":f;e("http://127.0.0.1:"+g+"/unbindLight?apikey="+clouda.lightapp.ak+d+"&callback=cloudaPushServiceUnregisterUnicast",function(a){document.head.removeChild(a)})},d.registerMulticast=function(a){if(clouda.lib.utils.setLogStorage("push","registerMulticast"),b())return void c("deleteLAPush","tag",a);window.cloudaPushServiceRegisteMulticast=function(b){b.error?a.onfail(b):a.onsuccess(b)};var d="";a.nonce&&a.csrftoken&&(d="&nonce="+a.nonce+"&csrftoken="+a.csrftoken);var g=""===f?"7777":f;e("http://127.0.0.1:"+g+"/subscribeService?apikey="+clouda.lightapp.ak+d+"&tag="+a.tag+"&callback=cloudaPushServiceRegisteMulticast",function(a){document.head.removeChild(a)})},d.unregisterMulticast=function(a){if(clouda.lib.utils.setLogStorage("push","unregisterMulticast"),b())return void c("deleteLAPush","tag",a);window.cloudaPushServiceUnregisterMulticast=function(b){b.error?a.onfail(b):a.onsuccess(b)};var d="";a.nonce&&a.csrftoken&&(d="&nonce="+a.nonce+"&csrftoken="+a.csrftoken);var g=""===f?"7777":f;e("http://127.0.0.1:"+g+"/unsubscribeService?apikey="+clouda.lightapp.ak+d+"&tag="+a.tag+"&callback=cloudaPushServiceUnregisterMulticast",function(a){document.head.removeChild(a)})},d.detectRuntime=function(a){clouda.lib.utils.setLogStorage("push","detectRuntime"),window.cloudaPushServiceDetectRuntime=function(b){a(b)},e("http://127.0.0.1:7777/detectRuntime?callback=cloudaPushServiceDetectRuntime",function(a){document.head.removeChild(a)})},d.startRuntime=function(a){clouda.lib.utils.setLogStorage("push","startRuntime");var b=encodeURIComponent("#Intent;action=com.baidu.lightapp.runtime.start;end");window.cloudaPushServiceStartRuntime=function(b){a(b)},e("http://127.0.0.1:7777/startRuntime?intent="+b+"&callback=cloudaPushServiceStartRuntime",function(a){document.head.removeChild(a)})},d.getUniqueId=function(a){if(clouda.lib.utils.setLogStorage("push","getUniqueId"),clouda.RUNTIME===clouda.RUNTIMES.KUANG&&clouda.PLATFORM===clouda.PLATFORMS.IOS&&"function"==typeof BLightApp.getUniqueId){var b=function(b){var c={error:0,unique_id:b.unique_id?b.unique_id:""};a.onsuccess(c)},c=function(b){a.onfail(b)};return void cloudaBLight("getUniqueId",JSON.stringify({}),b,c)}window.cloudaPushServiceGetUniqueId=function(b){b.error?a.onfail(b):a.onsuccess(b)};var d=""===f?"7777":f;e("http://127.0.0.1:"+d+"/getUniqueId?apikey="+clouda.lightapp.ak+"&callback=cloudaPushServiceGetUniqueId",function(a){document.head.removeChild(a)})},d.isBind=function(a){if(clouda.lib.utils.setLogStorage("push","isBind"),b())return void c("queryLAPush","bind",a);if(clouda.RUNTIME===clouda.RUNTIMES.KUANG&&clouda.RUNTIME_VERSION<="5.4")return cloudaBLight("queryWzStatus",function(b){var c=parseInt(b.status,10);1==c?a.onsuccess({error:0,is_bind:!0}):0===c&&a.onsuccess({error:0,is_bind:!1})},a.onfail),!1;window.cloudaPushServiceIsBind=function(b){b.error?a.onfail(b):a.onsuccess(b)};var d=""===f?"7777":f;e("http://127.0.0.1:"+d+"/isBind?apikey="+clouda.lightapp.ak+"&callback=cloudaPushServiceIsBind",function(a){document.head.removeChild(a)})},d.checkSupport=function(a){var b={};if(clouda.RUNTIME===clouda.RUNTIMES.KUANG&&clouda.RUNTIME_VERSION<"5.4"&&clouda.PLATFORM===clouda.PLATFORMS.ANDROID)return b["native"]=1,b.web=0,void a(b);if(clouda.RUNTIME===clouda.RUNTIMES.KUANG&&clouda.RUNTIME_VERSION>="6.1"&&clouda.PLATFORM===clouda.PLATFORMS.IOS)return b["native"]=1,b.web=0,void a(b);var c=(navigator.userAgent,!1);!function(){var a=setTimeout(function(){c?clear(a):getPushServiceVersionCallback({error:1})},2e3)}(),window.getPushServiceVersionCallback=function(d){if(c=!0,d.error)b.web=0,b["native"]=0,a(b),console.error("fail to getPushVersion");else{{d.pushVersion}d.pushVersion>=23?(b["native"]=1,b.web=1):(b.web=0,b["native"]=0),a(b)}},e("http://127.0.0.1:7777/getPushServiceVersion?callback=getPushServiceVersionCallback",function(a){f="7777",document.head.removeChild(a)}),e("http://127.0.0.1:9741/getPushServiceVersion?callback=getPushServiceVersionCallback",function(a){f="9741",document.head.removeChild(a)})}});define("mbaas/socialshare",function(a){function b(a){var b=clouda.lightInit.ak||clouda.lightapp.ak,e=document.getElementsByClassName("bdSharePopup");if(1==a.hide){for(var f,j=0,k=e.length;k>j;j++)f=e[j],"block"==f.style.display&&(f.style.display="none");return!1}var l=function(a){var b=a.parentNode;b&&b.removeChild(a)};if(!a.content)return!1;for(var m=e.length,n=m-1;n>=0;n--)e[n]&&l(e[n]);a.linkUrl=a.linkUrl?a.linkUrl:location.href,a.linkUrl=d(a.linkUrl),console.log(a.linkUrl),a.linkUrl=encodeURIComponent(a.linkUrl),a.imageUrl=a.imageUrl?encodeURIComponent(a.imageUrl):"";var o={afterRender:function(){console.log("afterRender exec...")},client_id:b,dom_id:"hidden_btn",content:a.content,theme:"native",appid:a.appid?a.appid:"",animate:!1,url:a.linkUrl,pic_url:a.imageUrl};if(console.log(o),document.querySelector("#hidden_btn"))return g=document.getElementById("hidden_btn"),void socShare.init(o,function(){g.dispatchEvent(h)});var p;p="http:"===window.location.protocol?"http://apps.bdimg.com":"https://openapi.baidu.com";var q=1.5;c(p+"/cloudaapi/socialshare-api/share.min.js?a="+q,function(){var c=["weixin_friend","weixin_timeline","qqfriend","sinaweibo","qqweibo","qqdenglu","renren","sms","email"];if(a.mediaType&&"all"!==a.mediaType){for(var d=!1,e=0,f=c.length;f>e;e++)if(c[e]==a.mediaType){d=!0;break}if(d)return void("weixin_friend"==a.mediaType||"weixin_timeline"==a.mediaType||"qqfriend"==a.mediaType?clouda.lib.moplus.openApp(!0,o.appid):"sinaweibo"==a.mediaType||"qqweibo"==a.mediaType||"renren"==a.mediaType?location.href="http://openapi.baidu.com/social/widget/share?method=share&media_type="+a.mediaType+"&client_id="+b+"&url="+a.linkUrl+"&pic_url="+a.imageUrl+"&content="+encodeURIComponent(a.content)+"&u="+a.linkUrl:"qqdenglu"==a.mediaType?location.href=socShare.acc.getQQHref(o):("sms"==a.mediaType||"email"==a.mediaType)&&socShare.acc.getShortLink({client_id:b,url:a.linkUrl},function(){var b=socShare.acc.shortLinks[a.mediaType];location.href="sms"==a.mediaType?socShare.acc.getSMSHref(a.content,b):socShare.acc.getEmailHref(a.content,b)}))}i=!0,document.querySelector("#hidden_btn")?console.log("js 加载失败"):(g=document.createElement("div"),g.id="hidden_btn",g.style.display="none",document.body.appendChild(g),socShare.init(o,function(){g.dispatchEvent(h)}))})}function c(a,b){var c,d,e,f=document.head||document.getElementsByTagName("head")[0]||document.documentElement;"object"==typeof a&&(d=a,a=void 0),e=d||{},a=a||e.url,b=b||e.success,c=document.createElement("script"),c.id="share_script",c.async=e.async||!1,c.type="text/javascript",c.charset=e.charset?e.charset:"utf-8",c.src=a,f.insertBefore(c,f.firstChild),"function"==typeof b&&(document.addEventListener?c.addEventListener("load",b,!1):c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&(c.onreadystatechange=null,b())})}function d(a){var b=a,c=a.match(/^(http:\/\/|https:\/\/)?(.+\?)/i);if(c){for(var d=a.substring(c[0].length),e=d.split("&"),f=[],g=0;g<e.length;g++)e[g].match(/^bd_/)||f.push(e[g]);b=c[0]+f.join("&")}return b}var e=this,f=a.socialshare={};f.loadFlag=1;var g=null,h=document.createEvent("HTMLEvents");h.initEvent("click",!1,!0),h.eventType="message";var i=!1;return f.callShare=function(a){if(clouda.RUNTIME===clouda.RUNTIMES.KUANG&&BLightApp&&"function"==typeof BLightApp.callShare||navigator.userAgent.match(/baiduboxapp\/([\d+.]+)/)&&clouda.RUNTIME_VERSION>="5.3.5"){if(1==a.hide)return!1;if(!a.onsuccess||!a.onfail||"function"!=typeof a.onsuccess||"function"!=typeof a.onfail)return e.error(ErrCode.UNKNOW_INPUT,ErrCode.UNKNOW_INPUT,a),!1;if(!a.content)return e.error(ErrCode.UNKNOW_INPUT,ErrCode.UNKNOW_INPUT,a),!1;if(!a.mediaType)return e.error(ErrCode.UNKNOW_INPUT,ErrCode.UNKNOW_INPUT,a),!1;a.title||(a.title="来自手机百度"),a.linkUrl||(a.linkUrl=location.href),a.linkUrl=d(a.linkUrl);var c=clouda.lib.utils.regcallback(a.onsuccess,a.onfail);if(clouda.RUNTIME===clouda.RUNTIMES.KUANG)BLightApp.callShare(JSON.stringify(a),c.s,c.f);else if("undefined"!=typeof Bdbox_android_utils&&"undefined"!=typeof Bdbox_android_utils.callShare)Bdbox_android_utils.callShare(JSON.stringify(a),c.s,c.f);else if(clouda.PLATFORM===clouda.PLATFORMS.IOS){var f="baiduboxapp://callShare?options="+encodeURIComponent(JSON.stringify(a))+"&errorcallback="+c.f+"&successcallback="+c.s;location.href=f}return!1}return clouda.RUNTIME===clouda.RUNTIMES.NUWA?(b(a),!1):(b(a),!1)},f.checkSupport=function(a){var b={};clouda.RUNTIME===clouda.RUNTIMES.NUWA?b["native"]=0:clouda.RUNTIME===clouda.RUNTIMES.KUANG?b["native"]=BLightApp&&"function"==typeof BLightApp.callShare?1:0:clouda.RUNTIME===clouda.RUNTIMES.WEB&&(b["native"]=navigator.userAgent.match(/baiduboxapp\/([\d+.]+)/)&&clouda.RUNTIME_VERSION>="5.3.5"?1:0),b.web=1,a(b)},f});})(window);void function(g,f,j,c,h,d,b){g.alogObjectName=h,g[h]=g[h]||function(){(g[h].q=g[h].q||[]).push(arguments)},g[h].l=g[h].l||+new Date,d=f.createElement(j),d.async=!0,d.src=c,b=f.getElementsByTagName(j)[0],b.parentNode.insertBefore(d,b)}(window,document,"script","http://img.baidu.com/hunter/alog/alog.mobile.min.js","alog");void function(winEle,docEle){function _isObject(param){return param instanceof Object&&!(param instanceof Array)}function sendSpeed(){if(!winEle.performance||!winEle.performance.timing){return false}var timing=winEle.performance.timing;var start=timing["domainLookupStart"];var fetch_timing={};fetch_timing["dns"]=timing["domainLookupEnd"];fetch_timing["ct"]=timing["connectEnd"];fetch_timing["ttfb"]=timing["responseStart"];fetch_timing["it"]=timing["domInteractive"];fetch_timing["dt"]=timing["domComplete"];fetch_timing["lt"]=timing["loadEventEnd"];for(var key in fetch_timing){fetch_timing[key]=Math.max(fetch_timing[key]-start,0)}fetch_timing["fr"]=typeof LegoAppInfo!=="undefined"?1:2;fetch_timing["rt"]=timing["redirectEnd"]-timing["redirectStart"];alog("speed.send","speed",fetch_timing)}function afterLoad(){setTimeout(sendSpeed,100)}if(typeof window.clouda==="undefined"){window.clouda={}}if(typeof clouda.lego==="undefined"){clouda.lego={}}var lego=winEle.clouda.lego;lego.monitor={create:function(appId,pageId,sample,initSpeed){var postUrl="http://stat.zhidahao.baidu.com/";alog("qing.create",{postUrl:postUrl+"s.gif",app_id:appId,page_id:pageId||0});if(initSpeed){lego.monitor.send("pv",{smb:clouda.lego.smartBar.version||"no"});if(!sample||parseFloat(sample)>1||parseFloat(sample)<0){sample=1}if(Math.random()<parseFloat(sample)&&winEle.performance&&performance.timing){alog("speed.create",{postUrl:postUrl+"m.gif",app_id:appId,page_id:pageId});if(docEle.readyState=="complete")afterLoad();else winEle.addEventListener("load",afterLoad)}}},click:function(param){lego.monitor.send("click",param)},error:function(param){lego.monitor.send("error",param)},send:function(type,param){_isObject(param)&&alog("qing.send",type||"click",param)}}}(window,document);